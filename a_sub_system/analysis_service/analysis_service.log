2025-10-01 02:22:12,078 - analysis_service - INFO - ============================================================
2025-10-01 02:22:12,078 - analysis_service - INFO - 音訊分析服務初始化
2025-10-01 02:22:12,078 - analysis_service - INFO - ============================================================
2025-10-01 02:22:12,078 - analysis_service - INFO - 初始化 MongoDB 連接...
2025-10-01 02:22:12,114 - analysis_service - INFO - ✓ MongoDB 連接成功
2025-10-01 02:22:12,141 - analysis_service - INFO - 初始化分析流程...
2025-10-01 02:22:12,141 - analysis_service - INFO - AudioSlicer 初始化: duration=0.16s, interval=0.2s
2025-10-01 02:22:12,151 - analysis_service - INFO - LEAF 提取器初始化成功 (device=cpu)
2025-10-01 02:22:12,151 - analysis_service - INFO - 分類器初始化: method=random
2025-10-01 02:22:12,151 - analysis_service - INFO - ✓ 所有處理器初始化成功
2025-10-01 02:22:12,151 - analysis_service - INFO - 初始化 MongoDB 監聽器...
2025-10-01 02:22:12,151 - analysis_service - INFO - MongoDB 監聽器初始化完成
2025-10-01 02:22:12,151 - analysis_service - INFO - ✓ 所有組件初始化完成
2025-10-01 02:22:12,151 - analysis_service - INFO - 啟動 3 個工作執行緒...
2025-10-01 02:22:12,152 - analysis_service - INFO - Worker-1 已啟動
2025-10-01 02:22:12,152 - analysis_service - INFO - Worker-2 已啟動
2025-10-01 02:22:12,153 - analysis_service - INFO - Worker-3 已啟動
2025-10-01 02:22:12,153 - analysis_service - INFO - 處理現有待處理記錄...
2025-10-01 02:22:12,153 - analysis_service - INFO - 檢查現有待處理記錄...
2025-10-01 02:22:12,157 - analysis_service - INFO - 沒有待處理記錄
2025-10-01 02:22:12,157 - analysis_service - INFO - ============================================================
2025-10-01 02:22:12,157 - analysis_service - INFO - 服務啟動成功，開始監聽新記錄...
2025-10-01 02:22:12,157 - analysis_service - INFO - 按 Ctrl+C 停止服務
2025-10-01 02:22:12,157 - analysis_service - INFO - ============================================================
2025-10-01 02:22:12,157 - analysis_service - INFO - 使用 Change Stream 模式監聽 MongoDB
2025-10-01 02:22:12,157 - analysis_service - INFO - 開始監聽 Change Stream...
2025-10-01 02:22:12,157 - analysis_service - INFO - 開始監聽 MongoDB Change Stream...
2025-10-01 02:22:12,164 - analysis_service - ERROR - Change Stream 監聽失敗: The $changeStream stage is only supported on replica sets, full error: {'ok': 0.0, 'errmsg': 'The $changeStream stage is only supported on replica sets', 'code': 40573, 'codeName': 'Location40573'}
2025-10-01 02:22:12,164 - analysis_service - ERROR - Change Stream 錯誤 (重試 1/3): The $changeStream stage is only supported on replica sets, full error: {'ok': 0.0, 'errmsg': 'The $changeStream stage is only supported on replica sets', 'code': 40573, 'codeName': 'Location40573'}
2025-10-01 02:22:14,165 - analysis_service - INFO - 開始監聽 Change Stream...
2025-10-01 02:22:14,165 - analysis_service - INFO - 開始監聽 MongoDB Change Stream...
2025-10-01 02:22:14,168 - analysis_service - ERROR - Change Stream 監聽失敗: The $changeStream stage is only supported on replica sets, full error: {'ok': 0.0, 'errmsg': 'The $changeStream stage is only supported on replica sets', 'code': 40573, 'codeName': 'Location40573'}
2025-10-01 02:22:14,168 - analysis_service - ERROR - Change Stream 錯誤 (重試 2/3): The $changeStream stage is only supported on replica sets, full error: {'ok': 0.0, 'errmsg': 'The $changeStream stage is only supported on replica sets', 'code': 40573, 'codeName': 'Location40573'}
2025-10-01 02:22:16,169 - analysis_service - INFO - 開始監聽 Change Stream...
2025-10-01 02:22:16,169 - analysis_service - INFO - 開始監聽 MongoDB Change Stream...
2025-10-01 02:22:16,171 - analysis_service - ERROR - Change Stream 監聽失敗: The $changeStream stage is only supported on replica sets, full error: {'ok': 0.0, 'errmsg': 'The $changeStream stage is only supported on replica sets', 'code': 40573, 'codeName': 'Location40573'}
2025-10-01 02:22:16,171 - analysis_service - ERROR - Change Stream 錯誤 (重試 3/3): The $changeStream stage is only supported on replica sets, full error: {'ok': 0.0, 'errmsg': 'The $changeStream stage is only supported on replica sets', 'code': 40573, 'codeName': 'Location40573'}
2025-10-01 02:22:16,171 - analysis_service - ERROR - 達到最大重試次數，切換到輪詢模式
2025-10-01 02:22:16,171 - analysis_service - INFO - 開始輪詢模式，間隔: 5 秒
2025-10-01 02:22:45,722 - analysis_service - INFO - 
收到終止信號 (2)，正在關閉服務...
2025-10-01 02:22:45,722 - analysis_service - INFO - 正在停止服務...
2025-10-01 02:22:45,722 - analysis_service - INFO - MongoDB 監聽器已停止
2025-10-01 02:22:45,722 - analysis_service - INFO - 等待工作執行緒完成...
2025-10-01 02:22:46,389 - analysis_service - INFO - Worker-3 已停止
2025-10-01 02:22:46,389 - analysis_service - INFO - Worker-1 已停止
2025-10-01 02:22:46,389 - analysis_service - INFO - Worker-2 已停止
2025-10-01 02:22:46,390 - analysis_service - INFO - LEAF 提取器資源已清理
2025-10-01 02:22:46,390 - analysis_service - INFO - 分析流程資源已清理
2025-10-01 02:22:46,393 - analysis_service - INFO - MongoDB 連接已關閉
2025-10-01 02:22:46,393 - analysis_service - INFO - 服務已停止
